---
import FormattedDate from './FormattedDate.astro';
import { tagToSlug } from '../lib/tags';

interface Props {
	href: string;
	title: string;
	description: string;
	pubDate: Date | string;
	tags?: string[];
}

const { href, title, description, pubDate, tags = [] } = Astro.props;
---

<article class="post-card">
	<h3>
		<a href={href} class="post-link">{title}</a>
	</h3>
	<p>{description}</p>
	{
		tags.length > 0 && (
			<ul class="tags">
				{tags.map((tag) => <li><a href={`/tags/${tagToSlug(tag)}/`}>{tag}</a></li>)}
			</ul>
		)
	}
	<div class="post-meta">
		<FormattedDate date={pubDate} />
	</div>
</article>

<style>
	.post-card {
		padding: var(--space-5);
		border: 1px solid var(--line-subtle);
		border-radius: var(--radius-md);
		background: color-mix(in srgb, var(--panel-bg), white 24%);
	}

	.post-card:hover {
		transform: translateY(-1px);
		border-color: color-mix(in srgb, var(--link), white 45%);
		box-shadow: 0 12px 30px rgba(14, 64, 73, 0.08);
	}

	.post-card h3 {
		margin-bottom: var(--space-2);
	}

	.post-link {
		text-decoration: none;
		color: inherit;
	}

	.post-link:hover {
		color: var(--link-hover);
	}

	.post-card p {
		margin-bottom: var(--space-3);
	}

	.tags {
		display: flex;
		flex-wrap: wrap;
		gap: 0.35rem;
		list-style: none;
		margin: 0 0 var(--space-3);
		padding: 0;
	}

	.tags a {
		display: inline-flex;
		padding: 0.16rem 0.45rem;
		border-radius: 999px;
		font-size: 0.74rem;
		background: rgba(25, 32, 33, 0.08);
		color: var(--text-strong);
		text-decoration: none;
	}

	.tags a:hover {
		background: rgba(25, 32, 33, 0.15);
	}

	.post-meta {
		font-size: 0.84rem;
		color: var(--text-muted);
	}
</style>
