---
import { getCollection } from 'astro:content';
import PostCard from '../../components/PostCard.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../../consts';
import SiteShell from '../../layouts/SiteShell.astro';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<SiteShell title={SITE_TITLE} description={SITE_DESCRIPTION}>
	<section class="blog-list">
		<h1>All Posts</h1>
		<ul>
			{
				posts.map((post) => (
					<li>
						<PostCard
							href={`/blog/${post.id}/`}
							title={post.data.title}
							description={post.data.description}
							pubDate={post.data.pubDate}
						/>
					</li>
				))
			}
		</ul>
	</section>
</SiteShell>

<style>
	.blog-list h1 {
		margin-bottom: var(--space-5);
	}

	.blog-list ul {
		list-style: none;
		padding: 0;
		margin: 0;
		display: grid;
		gap: var(--space-4);
	}
</style>
