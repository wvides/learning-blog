---
import PostCard from '../../components/PostCard.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../../consts';
import { getPublishedPosts, postPathFromId } from '../../lib/posts';
import SiteShell from '../../layouts/SiteShell.astro';

const posts = await getPublishedPosts();
---

<SiteShell title={SITE_TITLE} description={SITE_DESCRIPTION}>
	<section class="blog-list">
		<h1>All Posts</h1>
		<ul>
			{
				posts.map((post) => (
					<li>
						<PostCard
							href={postPathFromId(post.id)}
							title={post.data.title}
							description={post.data.summary || post.data.description}
							pubDate={post.data.pubDate}
							tags={post.data.tags}
						/>
					</li>
				))
			}
		</ul>
	</section>
</SiteShell>

<style>
	.blog-list h1 {
		margin-bottom: var(--space-5);
	}

	.blog-list ul {
		list-style: none;
		padding: 0;
		margin: 0;
		display: grid;
		gap: var(--space-4);
	}
</style>
