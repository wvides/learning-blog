---
import { SITE_DESCRIPTION, SITE_TITLE } from '../../consts';
import { withBase } from '../../lib/paths';
import { getTagSummaries } from '../../lib/tags';
import SiteShell from '../../layouts/SiteShell.astro';

const tags = await getTagSummaries();
---

<SiteShell title={`${SITE_TITLE} | Tags`} description={SITE_DESCRIPTION}>
	<section class="tags">
		<h1>Tags</h1>
		<p class="intro">
			Topic hubs group related posts so you can follow a thread from one experiment to the next.
		</p>
		<ul>
			{
				tags.map((tag) => (
					<li>
						<a href={withBase(`/tags/${tag.slug}/`)}>
							<div>
								<strong>{tag.name}</strong>
								<p>{tag.description}</p>
							</div>
							<small>{tag.count} post(s)</small>
						</a>
					</li>
				))
			}
		</ul>
	</section>
</SiteShell>

<style>
	.tags h1 {
		margin-bottom: var(--space-2);
	}

	.intro {
		margin-top: 0;
		margin-bottom: var(--space-5);
		max-width: 62ch;
	}

	.tags ul {
		list-style: none;
		padding: 0;
		margin: 0;
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
		gap: var(--space-3);
	}

	.tags a {
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: 0.8rem;
		padding: 0.95rem 1rem;
		border-radius: var(--radius-md);
		border: 1px solid var(--line-subtle);
		background: color-mix(in srgb, var(--panel-bg), white 24%);
		text-decoration: none;
	}

	.tags a strong {
		display: block;
		margin-bottom: 0.2rem;
		color: var(--text-strong);
		font-size: 0.92rem;
	}

	.tags a p {
		margin: 0;
		font-size: 0.82rem;
		color: var(--text-muted);
	}

	.tags small {
		color: var(--text-muted);
		white-space: nowrap;
	}
</style>
